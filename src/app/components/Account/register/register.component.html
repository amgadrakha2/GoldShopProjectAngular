<div class="register-container">
  <form class="register-card" (ngSubmit)="registerUser()" class="register-form" #registerForm="ngForm">
    <h2>Create New Account</h2>
    <div class="form-group">
      <label for="username">Username</label>
      <div class="input-with-icon">
        <i class="fas fa-user"></i>
        <input type="text" id="username" [(ngModel)]="user.userName" name="userName" required />
      </div>
      <div *ngIf="registerForm.controls['userName']?.invalid && registerForm.controls['userName']?.touched" class="error-message">
        Username is required.
      </div>
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <div class="input-with-icon">
        <i class="fas fa-lock"></i>
        <input type="password" id="password" [(ngModel)]="user.password" name="password" required />
      </div>
      <div *ngIf="registerForm.controls['password']?.invalid && registerForm.controls['password']?.touched" class="error-message">
        Password is required.
      </div>
    </div>
    <div class="form-group">
      <label for="phoneNumber">Phone Number</label>
      <div class="input-with-icon">
        <i class="fas fa-phone"></i>
        <input type="text" id="phoneNumber" [(ngModel)]="user.phoneNumber" name="phoneNumber" required />
      </div>
      <div *ngIf="registerForm.controls['phoneNumber']?.invalid && registerForm.controls['phoneNumber']?.touched" class="error-message">
        Phone number is required.
      </div>
    </div>
    <div *ngIf="errorMessage === 'Please enter 11 digits.'" class="error-message">
      {{ errorMessage }}
    </div>
    <div *ngIf="errorMessage && errorMessage !== 'Please enter 11 digits.'" class="error-message">
      {{ errorMessage }}
    </div>
    <div class="form-actions">
      <button type="submit" [disabled]="registerForm.invalid || isLoading" class="register-button">
        <span *ngIf="!isLoading">Register</span>
        <span *ngIf="isLoading" class="spinner"></span>
      </button>
    </div>
    <div *ngIf="message" class="register-message">
      <p>{{ message }}</p>
    </div>
    <div class="login-redirect">
      <span>If you already have an account, </span>
      <a routerLink="/login" class="login-link">Login Now</a>
    </div>
  </form>
</div>
